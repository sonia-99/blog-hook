(this["webpackJsonpblog-hook"]=this["webpackJsonpblog-hook"]||[]).push([[0],{28:function(t,e,n){},36:function(t,e,n){"use strict";n.r(e);var c,i,a,r,o,s=n(0),j=n.n(s),u=n(20),b=n.n(u),l=(n(28),n(6)),d=n(2),h=n(3),O=n(10),f=n(4),x=Object(s.createContext)(),p="token",g=function(t){localStorage.setItem(p,t)},v=function(){return localStorage.getItem(p)},m="https://student-json-api.lidemy.me",y=function(){var t=v();return fetch("".concat(m,"/me"),{headers:{authorization:"Bearer ".concat(t)}}).then((function(t){return t.json()}))},S=n(1),w=h.a.div(c||(c=Object(d.a)(["\n\tbox-sizing: border-box;\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tborder: 1px solid grey;\n\theight: 64px;\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tfont-weight: bold;\n\tbackground: white;\n"]))),k=h.a.div(i||(i=Object(d.a)(["\n\theight: 100%;\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n"]))),C=h.a.div(a||(a=Object(d.a)(["\n\tfont-size: 1.4rem;\n\theight: 100%;\n\tdisplay: flex;\n\talign-items: center;\n\tpadding: 0 0.5rem;\n"]))),L=h.a.div(r||(r=Object(d.a)(["\n\theight: 100%;\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tmargin-left: 4rem;\n"]))),E=Object(h.a)(O.b)(o||(o=Object(d.a)(["\n\theight: 100%;\n\tdisplay: flex;\n\talign-items: center;\n\tpadding: 0 1rem;\n\tcolor: black;\n\ttext-decoration: none;\n\t","\n"])),(function(t){return t.$active&&"background:rgba(0,0,0,0.1)"}));var P,D,T,U,z,B=function(){var t=Object(f.g)(),e=Object(s.useContext)(x),n=e.user,c=e.setUser,i=e.isGettingUser,a=Object(f.f)();return Object(S.jsxs)(w,{children:[Object(S.jsxs)(k,{children:[Object(S.jsx)(C,{children:"A SIMPLE BLOG"}),Object(S.jsxs)(L,{children:[Object(S.jsx)(E,{to:"/",$active:"/"===t.pathname,children:"HOME"}),n&&Object(S.jsx)(E,{to:"/new-post",$active:"/new-post"===t.pathname,children:"+POST"})]})]}),Object(S.jsx)(L,{children:i||n?Object(S.jsx)(E,{onClick:function(){g(""),c(null),"/"!==t.pathname&&a.push("/")},children:"LOGOUT"}):Object(S.jsx)(E,{to:"/login",$active:"/login"===t.pathname,children:"LOGIN"})})]})},I=h.a.div(P||(P=Object(d.a)(["\n\twidth: 80%;\n\tmargin: 0 auto;\n"]))),F=h.a.div(D||(D=Object(d.a)(["\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: flex-end;\n\tpadding: 1rem;\n\tborder-bottom: 1px solid rgba(0, 0, 0, 0.3);\n"]))),G=Object(h.a)(O.b)(T||(T=Object(d.a)(["font-size: 1.2rem;color:#333;text-decoration:none;"]))),A=h.a.div(U||(U=Object(d.a)(["display: flex;"]))),J=h.a.div(z||(z=Object(d.a)(["color: rgba(0, 0, 0, 0.8);"])));function $(t){var e=t.post;return Object(S.jsx)(I,{children:Object(S.jsxs)(F,{children:[Object(S.jsx)(G,{to:"/posts/".concat(e.id),children:e.title}),Object(S.jsxs)(A,{children:[Object(S.jsx)(J,{children:new Date(e.createdAt).toLocaleString()}),Object(S.jsx)("div",{children:Object(S.jsx)("button",{onClick:function(){(function(t){var e=v();return fetch("".concat(m,"/posts/").concat(t),{method:"DELETE",headers:{authorization:"Bearer ".concat(e)}}).then((function(t){return t.json()}))})(e.id).then((function(t){alert("Deleting the post: ".concat(e.title,"."))}))},children:"Delete"})})]})]})})}var M,N,_=function(){var t=Object(s.useState)(null),e=Object(l.a)(t,2),n=e[0],c=e[1];return Object(s.useEffect)((function(){fetch("".concat(m,"/posts?_sort=createdAt&_order=desc")).then((function(t){return t.json()})).then((function(t){return c(t)}))}),[n]),Object(S.jsx)(I,{children:n&&n.map((function(t){return Object(S.jsx)($,{post:t},t.id)}))})},H=h.a.div(M||(M=Object(d.a)([""]))),q=h.a.div(N||(N=Object(d.a)(["color: red;"])));var K,Q,R,V,W,X=function(){var t=Object(s.useState)(""),e=Object(l.a)(t,2),n=e[0],c=e[1],i=Object(s.useState)(""),a=Object(l.a)(i,2),r=a[0],o=a[1],j=Object(s.useState)(""),u=Object(l.a)(j,2),b=u[0],d=u[1],h=Object(f.f)(),O=Object(s.useContext)(x).setUser;return Object(S.jsx)(H,{children:Object(S.jsxs)("form",{onSubmit:function(t){t.preventDefault(),d(""),n&&r&&function(t,e){return fetch("".concat(m,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:t,password:e})}).then((function(t){return t.json()}))}(n,r).then((function(t){if(0===t.ok)return d(t.message);1===t.ok&&(g(t.token),y().then((function(t){1===t.ok?(O(t.data),alert("Logged in successfully."),h.push("/")):(O(null),g(null),d("Failed to login...."))})))}))},children:[Object(S.jsxs)("div",{children:["Username:"," ",Object(S.jsx)("input",{type:"text",value:n,onChange:function(t){c(t.target.value)}})]}),Object(S.jsxs)("div",{children:["Password:"," ",Object(S.jsx)("input",{type:"password",value:r,onChange:function(t){o(t.target.value)}})]}),b&&Object(S.jsxs)(q,{children:["*",b]}),Object(S.jsx)("button",{children:"Login"})]})})},Y=h.a.div(K||(K=Object(d.a)(["\n\twidth: 80%;\n\tmargin: 0 auto;\n"]))),Z=h.a.div(Q||(Q=Object(d.a)([""]))),tt=h.a.h2(R||(R=Object(d.a)([""]))),et=h.a.div(V||(V=Object(d.a)(["color: rgba(0, 0, 0, 0.6);"]))),nt=h.a.div(W||(W=Object(d.a)(["\n\twhite-space: pre-line;\n\tmargin-bottom: 70px;\n"])));var ct,it=function(){var t=Object(f.h)().id,e=Object(s.useState)(null),n=Object(l.a)(e,2),c=n[0],i=n[1];return Object(s.useEffect)((function(){(function(t){return fetch("".concat(m,"/posts/").concat(t)).then((function(t){return t.json()}))})(t).then((function(t){return i(t)}))}),[]),Object(S.jsx)(Y,{children:c&&Object(S.jsxs)(Z,{children:[Object(S.jsx)(tt,{children:c.title}),Object(S.jsx)(et,{children:new Date(c.createdAt).toLocaleString()}),Object(S.jsx)(nt,{children:c.body})]})})},at=h.a.div(ct||(ct=Object(d.a)(["\n\twidth: 80%;\n\tmargin: 0 auto;\n"])));var rt,ot=function(){var t=Object(s.useState)(""),e=Object(l.a)(t,2),n=e[0],c=e[1],i=Object(s.useState)(""),a=Object(l.a)(i,2),r=a[0],o=a[1],j=Object(f.f)();return Object(S.jsx)(at,{children:Object(S.jsxs)("form",{onSubmit:function(t){t.preventDefault(),n&&r&&function(t,e){var n=v();return fetch("".concat(m,"/posts"),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer ".concat(n)},body:JSON.stringify({title:t,body:e})}).then((function(t){return t.json()}))}(n,r).then((function(t){if(0===t.ok)return alert(t.message);alert("Post submitted."),c(""),o(""),j.push("/")}))},children:[Object(S.jsxs)("div",{children:["Title: ",Object(S.jsx)("input",{type:"text",value:n,onChange:function(t){return c(t.target.value)}})]}),Object(S.jsxs)("div",{children:["Content: ",Object(S.jsx)("textarea",{rows:"20",value:r,onChange:function(t){return o(t.target.value)}})]}),Object(S.jsx)("button",{children:"Submit"})]})})},st=h.a.div(rt||(rt=Object(d.a)(["padding-top: 64px;"])));var jt=function(){var t=Object(s.useState)(null),e=Object(l.a)(t,2),n=e[0],c=e[1],i=Object(s.useState)((function(){return!!v()})),a=Object(l.a)(i,2),r=a[0],o=a[1];return Object(s.useEffect)((function(){v()&&y().then((function(t){if(t.ok)return c(t.data),void o(!1)}))}),[]),Object(S.jsx)(x.Provider,{value:{user:n,setUser:c,isGettingUser:r},children:Object(S.jsx)(st,{children:Object(S.jsxs)(O.a,{children:[Object(S.jsx)(B,{}),Object(S.jsxs)(f.c,{children:[Object(S.jsx)(f.a,{exact:!0,path:"/",children:Object(S.jsx)(_,{})}),Object(S.jsx)(f.a,{path:"/login",children:Object(S.jsx)(X,{})}),Object(S.jsx)(f.a,{path:"/posts/:id",children:Object(S.jsx)(it,{})}),Object(S.jsx)(f.a,{path:"/new-post",children:Object(S.jsx)(ot,{})})]})]})})})},ut=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,37)).then((function(e){var n=e.getCLS,c=e.getFID,i=e.getFCP,a=e.getLCP,r=e.getTTFB;n(t),c(t),i(t),a(t),r(t)}))};b.a.render(Object(S.jsx)(j.a.StrictMode,{children:Object(S.jsx)(jt,{})}),document.getElementById("root")),ut()}},[[36,1,2]]]);
//# sourceMappingURL=main.067901d9.chunk.js.map